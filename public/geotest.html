<!DOCTYPE html>


<html>
	<head>
		<title>WHAT</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="vendor/js/aframe.min.js"></script>
	</head>

	<body>
		<p id="text">pos: </p>

		<a-scene>
			<a-sphere id="blob" position="0 0 0" radius="1" color="#EF2D5E"></a-sphere>

			<a-plane material="src: dirt.jpg" height="100" width="100" rotation="-90 0 0"></a-plane>
			<a-sky color="#ECECEC"></a-sky>

			<a-entity position="0 2 0">
			<a-camera></a-camera>
			</a-entity>
		</a-scene>
	</body>
</html>


<script>
	var init_x;
	var init_z;

	function startLocator () {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(initPosition);
			navigator.geolocation.watchPosition(showPosition);
		}
		else
			alert("Geolocation not supported");
	}

	function initPosition (position) {
		init_x = parseFloat(position.coords.latitude);
		init_z = parseFloat(position.coords.longitude);
	}

	function showPosition (position) {
		var lat   = position.coords.latitude;
		var long  = position.coords.longitude;
		var pos_x = (lat-init_x) * (40000/360) * Math.cos(long*(Math.PI/180));
		var pos_y = 1;
		var pos_z = (long-init_z) * (40000/360);

		var element = document.getElementById("blob");
		element.setAttribute("position", pos_x +" "+ pos_y +" "+ pos_z);

		document.getElementById("text").innerHTML = "pos: "+pos_x+" "+pos_y+" "+pos_z;
	}

	startLocator();
</script>